(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,t,a){e.exports=a(25)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(8),s=a.n(r),i=a(10),l=a(1),c=a(2),h=a(4),p=a(3),d=a(5),g=(a(16),function(e){function t(){var e,a;Object(l.a)(this,t);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).bodyRef=Object(n.createRef)(),a.innerRef=Object(n.createRef)(),a.getHeight=function(){return a.bodyRef.current?a.bodyRef.current.offsetHeight:0},a.getDelta=function(){if(!a.innerRef.current||!a.bodyRef.current)return 0;var e=getComputedStyle(a.bodyRef.current),t=parseFloat(e.paddingLeft||"")+parseFloat(e.paddingRight||""),n=parseFloat(e.borderLeftWidth||"")+parseFloat(e.borderRightWidth||""),o=a.bodyRef.current.offsetWidth-t-n;return Math.max(a.innerRef.current.offsetWidth-o,0)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=[this.props.className||"","page"].join(" ");return o.a.createElement("section",{ref:this.bodyRef,className:e,style:Object(i.a)({top:this.props.hardOffset,transform:"translateY(".concat(this.props.offset,"px)")},this.props.style)},o.a.createElement("div",{ref:this.innerRef,style:{transform:"translate(".concat(-this.props.delta,"px)")},className:this.props.centerContent?"page__centered":"page-inner"},this.props.children))}}]),t}(o.a.PureComponent)),u=(a(17),function(e){return o.a.createElement(g,Object.assign({},e,{key:"description-page",className:"description-page"}),o.a.createElement("p",{className:"description-page__text"},"As you might have noticed, the beautiful panorama above was scrolling horizonally as you scrolled the page despite that the scroll direction was different. Moreover, if you notice the scrollbar on the right shows the position you are at correctly and can even be used to navigate around the page. So do all other scroll controls work."),o.a.createElement("p",{className:"description-page__text"},"Pure magic!"))}),m=(a(18),function(e){return o.a.createElement(g,Object.assign({},e,{key:"details-page",className:"details-page"}),o.a.createElement("div",{className:"details-page__text-container"},o.a.createElement("p",{className:"details-page__text"},'Well, actually there is no magic involved (obviously). So, what is actually happening here is that we have sections, called "pages", that hold all the contents of the page. All of these so-called pages have fixed width and are positioned absolutely. That allows to control page positioning and achieve the desired behavior.'),o.a.createElement("p",{className:"details-page__text"},'In case page children fit onto the page without overflowing it horizonally, the layout works pretty much the same way document flow with statically positioned elements does. The difference comes when page children start to overflow the page. In this case, once we start scrolling that page, we need to slightly "slow down" all the following pages. This way we have some scroll height to dedicate to scrolling children of the current page vertically while the page itself remains on top of the screen.'),o.a.createElement("p",{className:"details-page__text"},"Of course, in reality everything gets a bit more complicated (as per usual). One of such caveats is that once we start using assets, such as fonts and images, we need to calculate heights of pages once again as soon as the assests are loaded."),o.a.createElement("p",{className:"details-page__text"},"One thing I have found out while implementing this page is that it is important to use CSS transformations instead of absolute positioning. I found this to have a huge performance and visual impact. If you are interested about the why's, there is a"," ",o.a.createElement("a",{href:"https://www.paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/",target:"_blank",rel:"noopener noreferrer"},"good article by Paul Irish")," ","on that topic.")))}),f=(a(19),function(e){return o.a.createElement(g,Object.assign({},e,{centerContent:!0,key:"footer-page",className:"footer-page"}),o.a.createElement("p",{className:"footer-page__text"},"Inspired by an amazing magazine about typegraphy"," ",o.a.createElement("a",{href:"http://www.typejournal.ru",target:"_blank",rel:"noopener noreferrer",className:"footer-page__link"},"\xab\u0428\u0440\u0438\u0444\u0442\xbb")),o.a.createElement("p",{className:"footer-page__text"},"Huge thanks to amazing people behind"," ",o.a.createElement("a",{href:"https://www.latofonts.com/",target:"_blank",rel:"noopener noreferrer",className:"footer-page__link"}," ","Lato")," ","and"," ",o.a.createElement("a",{href:"https://www.behance.net/gallery/2075950/Typeface-Adec20-%28free%29",target:"_blank",rel:"noopener noreferrer",className:"footer-page__link"},"Adec")," ","fonts"),o.a.createElement("p",{className:"footer-page__text"},"Zhuravsky Max, 2019"))}),w=(a(20),function(e){return o.a.createElement(g,Object.assign({},e,{key:"main-page",className:"main-page"}),o.a.createElement("p",{className:"main-page__text"},'This page is a little demonstration of what I called a "seamless scroll" layout. The main goal of such layout is to release the user from necessity of scrolling the page horizontally while allowing some of the page elements to overflow page width.'),o.a.createElement("p",{className:"main-page__text"},"Enough talk, time to see it in action!"," ",o.a.createElement("span",{role:"img","aria-label":"Fire"},"\ud83d\udd25")))}),y=(a(21),function(e){return o.a.createElement(g,Object.assign({},e,{key:"panorama-page",className:"panorama-page"}),o.a.createElement("img",{className:"panorama-page__image",src:"https://images.unsplash.com/photo-1499336315816-097655dcfbda?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&dl=v2osk-303977-unsplash.jpg",alt:"Panorama"}),o.a.createElement("a",{className:"panorama-page__credits",href:"https://unsplash.com/@v2osk?utm_medium=referral&utm_campaign=photographer-credit&utm_content=creditBadge",target:"_blank",rel:"noopener noreferrer",title:"Download free do whatever you want high-resolution photos from v2osk"},o.a.createElement("span",{className:"panorama-page__credits-text"},o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:{height:"12px",width:"auto",position:"relative",verticalAlign:"middle",top:"-2px",fill:"white"},viewBox:"0 0 32 32"},o.a.createElement("title",null,"unsplash-logo"),o.a.createElement("path",{d:"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"}))),o.a.createElement("span",{className:"panorama-page__credits-text"},"v2osk")))}),v=(a(22),function(e){return o.a.createElement(g,Object.assign({},e,{key:"title-page",className:"title-page"}),o.a.createElement("h1",{className:"title-page__header"},"Seamless scroll"))}),b=a(9),_=a.n(b),E=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).pageRefs=[],a.state={height:[],delta:[]},a.handleScroll=function(){a.forceUpdate()},a.debouncedHandleScroll=_.a.debounce(a.handleScroll,16,{trailing:!0,leading:!0}),a.updateChildrenHeights=function(){console.log("Recalculating heights...");var e=a.pageRefs.map(function(e){return e.current?e.current.getHeight():0}),t=a.pageRefs.map(function(e){return e.current?e.current.getDelta():0});a.setState({height:e,delta:t})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("scroll",this.debouncedHandleScroll),document.addEventListener("load",this.updateChildrenHeights),window.onresize=this.updateChildrenHeights,document.fonts&&(document.fonts.onloadingdone=this.updateChildrenHeights),this.updateChildrenHeights()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.debouncedHandleScroll),document.removeEventListener("load",this.updateChildrenHeights),window.onresize=null,document.fonts&&(document.fonts.onloadingdone=null)}},{key:"render",value:function(){var e=this.state.height.reduce(function(e,t){return e+t},0)+this.state.delta.reduce(function(e,t){return e+t},0);return document.body.style.height="".concat(e,"px"),o.a.createElement("div",{className:"layout"},this.getPages())}},{key:"getPages",value:function(){var e=this,t=this.state,a=t.height,o=t.delta,r=window.pageYOffset,s=window.innerHeight,i=0;return this.props.children.map(function(t,l){if(!o.length||!a.length){var c=Object(n.createRef)();return e.pageRefs.push(c),t({ref:c,hardOffset:0,offset:0,delta:0})}var h,p,d,g=(h=r-i,p=0,d=o[l],Math.max(p,Math.min(h,d))),u=i+g-r,m=0;return u>s?(m=s+1,u=0):u<-e.state.height[l]&&(m=-e.state.height[l],u=0),i+=a[l]+g,t({ref:e.pageRefs[l],hardOffset:m,offset:u,delta:g})})}}]),t}(o.a.Component),k=function(){var e=[v,w,y,u,m,f];return o.a.createElement(E,null,e)};a(24),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[11,1,2]]]);
//# sourceMappingURL=main.47ecefbc.chunk.js.map